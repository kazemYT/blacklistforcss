// css_fun_car.cfg
// Counter-Strike: Source fun car config (cheats required)
// NOTE: commands are split into short steps to avoid length issues.
// Usage:
// 1) Put this file into .../cstrike/cfg/
// 2) In game: sv_cheats 1
// 3) In console: exec css_fun_car
// 4) Aim at the ground and run: car_spawn

// ---------------------------
// Quick binds
// ---------------------------
bind "F6" "car_spawn"
bind "F7" "car_cleanup"
bind "F8" "car_horn"
bind "F9" "car_music_toggle"
bind "F10" "car_vscript_demo"

alias car_help "echo === CSS FUN CAR ==="
alias car_help_2 "echo F6 spawn ^| F7 cleanup ^| F8 horn ^| F9 music ^| F10 vscript"
alias car_help_3 "echo To drive: look at buggy and press E"

// ---------------------------
// Cleanup (remove previous car + fx)
// ---------------------------
alias car_cleanup "ent_fire css_buggy kill; ent_fire css_car_engine kill; ent_fire css_car_light kill; ent_fire css_car_sparks kill; echo [car] cleanup done"

// ---------------------------
// Spawn drivable buggy + effects
// ---------------------------
alias car_spawn_1 "ent_create prop_vehicle_driveable model models/buggy.mdl"
alias car_spawn_2 "ent_fire prop_vehicle_driveable addoutput vehiclescript scripts/vehicles/jeep_test.txt"
alias car_spawn_3 "ent_fire prop_vehicle_driveable addoutput targetname css_buggy"
alias car_spawn_4 "ent_fire css_buggy TurnOn"
alias car_spawn_5 "ent_fire css_buggy Enable"
alias car_spawn_6 "car_fx"
alias car_spawn_7 "echo [car] buggy spawned (press E to drive)"

alias car_spawn_chain "car_spawn_1; wait 5; car_spawn_2; wait 2; car_spawn_3; wait 2; car_spawn_4; wait 2; car_spawn_5; wait 2; car_spawn_6; wait 2; car_spawn_7"
alias car_spawn "car_cleanup; wait 2; car_spawn_chain"

// ---------------------------
// FX: engine sound, light and sparks for style
// ---------------------------
alias car_fx_1 "ent_create ambient_generic targetname css_car_engine message vehicles/v8/vehicle_idle_loop1.wav spawnflags 49 health 10"
alias car_fx_2 "ent_fire css_car_engine PlaySound"
alias car_fx_3 "ent_create light_dynamic targetname css_car_light _light 255 220 180 180 brightness 2 distance 180"
alias car_fx_4 "ent_fire css_car_light TurnOn"
alias car_fx_5 "ent_create env_spark targetname css_car_sparks Magnitude 1 TrailLength 1"
alias car_fx_6 "ent_fire css_car_sparks StartSpark"
alias car_fx "car_fx_1; wait 2; car_fx_2; wait 2; car_fx_3; wait 2; car_fx_4; wait 2; car_fx_5; wait 2; car_fx_6"

alias car_music_toggle "ent_fire css_car_engine ToggleSound"
alias car_horn "playvol vehicles/v8/skid_highfriction.wav 0.6"

// ---------------------------
// VScript / script command demo bridge
// (works only if your build supports script command)
// ---------------------------
alias car_vscript_demo_1 "script printl(\"[car cfg] script command works\")"
alias car_vscript_demo_2 "script local c=Entities.FindByName(null,\"css_buggy\"); if(c!=null){printl(\"[car cfg] buggy exists\");}"
alias car_vscript_demo "car_vscript_demo_1; wait 1; car_vscript_demo_2"

car_help
car_help_2
car_help_3
echo [car] css_fun_car.cfg loaded
